#!/usr/bin/env bash

read INPUT

GROUP_NAME=$1
FILE_AMOUNT=$2
REDUNDANCY="$3 REDUNDANCY"
FAILGROUP_AMOUNT=$4

OUTPUT="
DROP DISKGROUP $GROUP_NAME INCLUDING CONTENTS;
CREATE DISKGROUP $GROUP_NAME $REDUNDANCY"

((DISKS_PER_GROUP = $FILE_AMOUNT / $FAILGROUP_AMOUNT))

declare -i DISK_COUNTER=0

for ((i = 0; i < $FAILGROUP_AMOUNT; i++)); do {
    OUTPUT="$OUTPUT
    FAILGROUP fg$i DISK"
    for ((j = 0; j < $DISKS_PER_GROUP; j++)); do {
        if (((DISK_COUNTER % 3) < 2)); then
            PREFIX=,
        else
            PREFIX=''
        fi
        FILE_NAME=$GROUP_NAME$DISK_COUNTER
        ((DISK_COUNTER++))
        OUTPUT="$OUTPUT
        '/u01/$GROUP_NAME/$FILE_NAME' NAME $FILE_NAME$PREFIX"
    }; done
}; done
OUTPUT="$OUTPUT;"

echo "$INPUT $OUTPUT"
